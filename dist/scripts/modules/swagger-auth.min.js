/*
 * Orange angular-swagger-ui - v0.4.4
 *
 * (C) 2015 Orange, all right reserved
 * MIT Licensed
 */
"use strict";window.swaggerOAuth=window.swaggerOAuth||{},angular.module("swaggerUiAuthorization",["swaggerUi","ui.bootstrap.modal"]).service("swaggerUiAuth",["$q","$uibModal",function(a,b){this.execute=function(c,d){var e=a.defer();return b.open({templateUrl:"templates/auth/modal-auth.html",controller:"SwaggerUiModalAuthCtrl",backdrop:!0,resolve:{auth:function(){return d},operation:function(){return c}}}).result.then(function(){},function(){}),e.resolve(!0),e.promise}}]).controller("SwaggerUiModalAuthCtrl",["$scope","operation","auth","$http",function(a,b,c,d){a.form={},a.auth=c,a.tab=0,a.onTokenReceived=null,window.swaggerOAuth.tokenReceived=window.swaggerOAuth.tokenReceived||function(b){a.onTokenReceived&&a.onTokenReceived(b)};var e=b.authParams||c[0];if(e)switch(e.type){case"apiKey":a.form.apiKey=e.apiKey;break;case"basic":a.form.basicLogin=e.login,a.form.basicPassword=e.password}a.authorize=function(){var d=!1,e=b.authParams=c[a.tab];switch(e.type){case"apiKey":a.form.apiKey?(e.apiKey=a.form.apiKey,d=!0):delete b.authParams,c[a.tab].valid=d,a.$close();break;case"basic":""===a.form.basicLogin&&""===a.form.basicPassword?delete b.authParams:(e.login=a.form.basicLogin,e.password=a.form.basicPassword,d=!0),c[a.tab].valid=d,a.$close();break;case"oauth2":var f="";for(var g in a.form.scopes)f+=g+",";f.length>0&&(f=f.substring(0,f.length-1));window.open(window.swaggerOAuth.authorizeUrl,"OAuth","width=600,height=700");a.$close(),a.onTokenReceived=function(b){console.log("oauth token has been received"),c[a.tab].valid=!0,e.bearer=b,a.onTokenReceived=null,a.$close(),a.$apply()},a.$close()}},a.setTab=function(b){a.tab=b}}]).run(["swaggerModules","swaggerUiAuth",function(a,b){a.add(a.AUTH,b)}]),angular.module("swaggerUiAuthorization").run(["$templateCache",function(a){a.put("templates/auth/modal-auth.html",'<div class="swagger-auth-modal"> <h2 swagger-translate="authAvailable"></h2> <ul class="list-inline"> <li ng-repeat="item in auth" ng-class="{active:tab==$index}"> <a ng-click="setTab($index)" ng-bind="item.type|swaggerTranslate"></a> </li> </ul> <form role="form" name="authForm" class="form-horizontal" ng-submit="authForm.$valid&&authorize()" autocomplete="off"> <div ng-if="auth[tab].type==\'apiKey\'"> <div class="form-group"> <label class="control-label col-xs-3" swagger-translate="authParamName"></label> <div class="col-xs-9"> <span class="form-control" ng-bind="auth[tab].name"></span> </div> </div> <div class="form-group"> <label class="control-label col-xs-3" swagger-translate="authParamType"></label> <div class="col-xs-9"> <span class="form-control" ng-bind="auth[tab].in"></span> </div> </div> <div class="form-group"> <label class="control-label col-xs-3" for="apiKey" swagger-translate="authParamValue"></label> <div class="col-xs-9"> <input class="form-control" id="apiKey" name="apiKey" type="text" ng-model="form.apiKey"> </div> </div> </div> <div ng-if="auth[tab].type==\'basic\'"> <div class="form-group"> <label class="control-label col-xs-3" for="basicLogin" swagger-translate="authLogin"></label> <div class="col-xs-9"> <input class="form-control col-xs-9" id="basicLogin" name="basicLogin" type="text" ng-model="form.basicLogin"> </div> </div> <div class="form-group"> <label class="control-label col-xs-3" for="basicPassword" swagger-translate="authPassword"></label> <div class="col-xs-9"> <input class="form-control col-xs-9" id="basicPassword" name="basicPassword" type="password" ng-model="form.basicPassword"> </div> </div> </div> <div ng-if="auth[tab].type==\'oauth2\'"> <p swagger-translate="authOAuthDesc"></p> <div class="form-group" ng-if="auth[tab].authorizationUrl"> <label class="control-label col-xs-3" swagger-translate="authAuthorizationUrl"></label> <div class="col-xs-9"> <span class="form-control" ng-bind="auth[tab].authorizationUrl"></span> </div> </div> <div class="form-group"> <label class="control-label col-xs-3" swagger-translate="authFlow"></label> <div class="col-xs-9"> <span class="form-control" ng-bind="auth[tab].flow"></span> </div> </div> <div class="form-group" ng-if="auth[tab].tokenUrl"> <label class="control-label col-xs-3" swagger-translate="authTokenUrl"></label> <div class="col-xs-9"> <span class="form-control" ng-bind="auth[tab].tokenUrl"></span> </div> </div> <div class="form-group"> <label class="control-label col-xs-3" swagger-translate="authScopes"></label> <div class="col-xs-9"> <div class="checkbox" ng-repeat="(name,desc) in auth[tab].scopes"> <label for="hidden" class="control-label"> <input type="checkbox" id="hidden" name="hidden" ng-model="form.scopes[name]"> <span ng-bind="name"></span> </label> <div class="scope-desc" ng-bind="desc"></div> </div> </div> </div> </div> <div class="form-group buttons"> <button class="btn btn-primary" type="submit" swagger-translate="authAuthorize"></button> <button class="btn btn-default" type="button" ng-click="$close()" swagger-translate="authCancel"></button> </div> </form> </div>')}]);